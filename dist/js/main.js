let checkboxAdd=document.querySelector("#checkboxAdd"),checkbox=document.querySelectorAll(".checkbox__box"),listWrapper=document.querySelector(".list__wrapper"),inputWrapper=document.querySelectorAll(".input__wrapper"),itemAmount=document.querySelector(".items__amount"),container=document.querySelector(".container"),textboxAdd=document.querySelector(".add"),btnClear=document.querySelector(".btn.--clear"),btnWrapper=document.querySelector(".btn__wrapper"),footer=document.querySelector(".footer");setInterval((()=>{inputWrapper=document.querySelectorAll(".input__wrapper"),checkbox=document.querySelectorAll(".checkbox__box")}),500);let todoList={currentList:{items:["Jog around the park 3x","10 minute meditation","Read for 1 hour","Pick up groceries","Complete Todo App on Frontend Mentor"],add:function(e){this.items.push(e)},delete:function(e){let t=this.items.indexOf(e);this.items.splice(t,1)},has:function(e){return!!this.items.includes(e)},sort:function(e,t){if(null==t)this.delete(e),this.add(e);else{this.delete(e);let i=this.items.indexOf(t);this.items.splice(i,0,e)}}},checkedList:{items:["Complete online JavaScript course"],add:function(e){this.items.push(e)},delete:function(e){let t=this.items.indexOf(e);this.items.splice(t,1)},has:function(e){return!!this.items.includes(e)},clear:function(){this.items=[]}},getAllList:function(){return this.currentList.items.concat(this.checkedList.items)}},activeList=todoList.currentList,checkedList=todoList.checkedList,mode="light";function drag(){document.addEventListener("dragstart",(e=>{let t=e.target;t.classList.contains("draggable")&&t.classList.add("dragging")})),document.addEventListener("dragend",(e=>{let t=e.target;t.classList.contains("draggable")&&t.classList.remove("dragging")})),listWrapper.addEventListener("dragover",(e=>{e.preventDefault();const t=function(e,t){return[...e.querySelectorAll(".draggable:not(.dragging)")].reduce(((e,i)=>{const s=i.getBoundingClientRect(),c=t-s.top-s.height/2;return c<0&&c>e.offset?{offset:c,element:i}:e}),{offset:Number.NEGATIVE_INFINITY,element:null}).element}(listWrapper,e.clientY),i=document.querySelector(".dragging");null==t?(activeList.sort(i.id),listWrapper.appendChild(i)):(activeList.sort(i.id,t.id),listWrapper.insertBefore(i,t))}))}function clearList(){for(;listWrapper.firstChild;)listWrapper.removeChild(listWrapper.firstChild)}function generateNewItem(e,t,i){let s=document.createElement("div"),c=`<div class="checkbox__box --${mode} ${t}"></div> \n    <label class="checkbox__label --show --${mode}"> \n    <input type="checkbox" class="--input"/> \n   ${e} \n    </label>\n    <div class="--delete"></div>`;s.classList.add("input__wrapper","--show","--"+mode,i.class),s.draggable=i.attribute,s.id=e,s.innerHTML=c,listWrapper.appendChild(s)}function showActiveItem(){activeList.items.forEach((e=>{generateNewItem(e,"",{attribute:!0,class:"draggable"})}))}function showCheckedItem(){checkedList.items.forEach((e=>{generateNewItem(e,"checked",{attribute:!1})}))}function showItem(){setTimeout((()=>{clearList();let e=location.hash;"#active"==e?showActiveItem():"#completed"==e?showCheckedItem():(showCheckedItem(),showActiveItem()),itemAmount.innerHTML=activeList.items.length+" items left"}),1)}function showList(){showItem(),document.addEventListener("click",(e=>{e.target.classList.contains("btn")&&showItem()}))}function checkItem(){document.addEventListener("click",(e=>{let t=e.target;if(t.classList.contains("checkbox__box")){t.classList.toggle("checked");let e=t.parentNode.id;if(t.classList.contains("--add"))return!1;activeList.has(e)?(activeList.delete(e),checkedList.add(e)):(activeList.add(e),checkedList.delete(e)),itemAmount.innerHTML=activeList.items.size+" items left"}}))}function addItem(){textboxAdd.addEventListener("keyup",(e=>{let t=e.target;if("Enter"==e.key){if(""==t.value)return alert("Please enter a new item!"),!1;if(checkboxAdd.classList.contains("checked"))checkedList.add(t.value);else{if(activeList.has(t.value))return alert("You have already add this in your list!"),!1;activeList.add(t.value)}showItem(),t.value=""}}))}function deleteItem(){document.addEventListener("click",(e=>{let t=e.target;if(t.classList.contains("--delete")){let e=t.parentNode.id;checkedList.has(e)&&checkedList.delete(e),activeList.has(e)&&activeList.delete(e)}else t.classList.contains("--clear")&&checkedList.clear();showItem()}))}function toggleMode(){document.addEventListener("click",(e=>{let t=e.target;if(t.classList.contains("mode")){function i(e){e.classList.toggle("--light"),e.classList.toggle("--dark")}mode="light"==mode?"dark":"light",i(t),i(container);for(let e=0;e<inputWrapper.length;e++)i(inputWrapper[e]),i(checkbox[e]);i(textboxAdd),i(itemAmount),i(btnClear),i(btnWrapper),i(footer)}}))}showList(),toggleMode(),checkItem(),addItem(),deleteItem(),drag();